<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> ì³‡RPG </title>
<style>
body{margin:0;background:#111;color:#fff;font-family:sans-serif;text-align:center}
.screen{display:none;min-height:100vh;padding:20px}
#title{display:block}
.big{font-size:48px}
.mid{font-size:22px}
.bar{width:92%;height:26px;background:#444;margin:8px auto;border-radius:14px}
.hp{height:100%;background:red;border-radius:14px}
button{width:92%;padding:16px;font-size:20px;margin:8px;border-radius:14px}
.flash-red{background:#600!important}
.flash-white{background:#eee!important}
.top{position:fixed;top:10px;right:12px;font-size:18px}
</style>
</head>
<body>

<div id="title" class="screen">
  <h1 class="big"> ğŸ—¡ï¸ ì³‡ RPG ğŸ—¡ï¸ </h1>
  <p class="mid">ì•„ë¬´ í™”ë©´ì´ë‚˜ í„°ì¹˜</p>
</div>

<div id="game" class="screen">
  <div class="top">ğŸ’° <span id="gold">0</span> | Lv <span id="lv"></span></div>

  <div class="big">ğŸ§â€â™‚ï¸</div>
  <div class="mid">ì „ì‚¬</div>
  <div class="bar"><div id="pHp" class="hp"></div></div>

  <div class="big" id="eEmoji"></div>
  <div class="mid" id="eName"></div>
  <div class="bar"><div id="eHp" class="hp"></div></div>

  <button id="atk">âš” ê³µê²©</button>
</div>

<div id="shop" class="screen">
  <h2 class="big">ğŸ›’ ìƒì </h2>
  <p>ê³¨ë“œ: <span id="shopGold"></span></p>
  <div id="shopItems"></div>
  <button onclick="next()">â¡ ê³„ì†</button>
</div>

<div id="levelup" class="screen">
  <h2 class="big">â¬† ë ˆë²¨ì—…!</h2>
  <button onclick="stat('hp')">â¤ï¸ ì²´ë ¥ +30</button>
  <button onclick="stat('atk')">âš” ê³µê²©ë ¥ +10</button>
</div>

<div id="gameover" class="screen">
  <h1 class="big">ğŸ’€ GAME OVER</h1>
  <button onclick="reset()">ë‹¤ì‹œ ì‹œì‘</button>
</div>

<script>
let player={
 lv:1, exp:0, need:3,
 maxHp:150, hp:150, atk:12
};
let gold=0, kill=0, enemy={}, canAttack=true;

/* ëª¬ìŠ¤í„° ëŒ€ëŸ‰ */
const monsters=[
["ìŠ¬ë¼ì„","ğŸ« "],["ì¥","ğŸ€"],["ë°•ì¥","ğŸ¦‡"],["ê°œêµ¬ë¦¬","ğŸ¸"],["ë±€","ğŸ"],
["ê³ ë¸”ë¦°","ğŸ‘º"],["ëŠ‘ëŒ€","ğŸº"],["í•´ê³¨","ğŸ’€"],["ì¢€ë¹„","ğŸ§Ÿ"],["ì „ê°ˆ","ğŸ¦‚"],
["ë„ì ","ğŸ¥·"],["ì˜¤ìš°ê±°","ğŸ‘¹"],["ì•¼ìˆ˜","ğŸ¦"],["í¡í˜ˆê·€","ğŸ§›"],["ìœ ë ¹","ğŸ‘»"],
["ì •ë ¹","ğŸ”®"],["ê±°ë¯¸","ğŸ•·ï¸"],["ì €ì£¼ëˆˆ","ğŸ§¿"],["ì–¸ë°ë“œ","ğŸ¦´"],["íŠ¸ë¡¤","ğŸ§Œ"]
];

const weapons=[
["ì² ê²€",5,30],["ê°•ì² ê²€",10,60],["ê¸°ì‚¬ê²€",15,100],["ë§ˆê²€",22,150],["ì „ì„¤ê²€",35,220]
];

document.body.onclick=()=>{
 if(title.style.display!=="none"){load();show("game");spawn();}
};

function show(id){
 document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
 document.getElementById(id).style.display="block";
}

function spawn(){
 canAttack=true;
 let boss=kill>0 && kill%10===0;
 if(boss){
  enemy={name:"ë³´ìŠ¤ ë“œë˜ê³¤",emoji:"ğŸ‘‘ğŸ‰",hp:320,maxHp:300,atk:20};
 }else{
  let m=monsters[Math.floor(Math.random()*monsters.length)];
  enemy={name:m[0],emoji:m[1],hp:80+kill*2,maxHp:80+kill*2,atk:8+kill};
 }
 eName.innerText=enemy.name;
 eEmoji.innerText=enemy.emoji;
 update();
}

atk.onclick=()=>{
 if(!canAttack) return;
 canAttack=false;
 enemy.hp-=player.atk;
 flash("white"); vibrate();

 if(enemy.hp<=0){
  gold+=Math.floor(Math.random()*40)+10;
  kill++; player.exp++;
  if(player.exp>=player.need){player.exp=0;show("levelup");save();return;}
  openShop(); return;
 }

 setTimeout(enemyAtk,800);
 setTimeout(()=>canAttack=true,2000);
 update();
};

function enemyAtk(){
 player.hp-=enemy.atk;
 flash("red"); vibrate();
 if(player.hp<=0){save();show("gameover");}
 update();
}

function openShop(){
 show("shop"); shopGold.innerText=gold;
 shopItems.innerHTML="";
 let p=document.createElement("button");
 p.innerText="íšŒë³µí¬ì…˜ (+40) 10G";
 p.onclick=()=>{if(gold>=20){gold-=20;player.hp=Math.min(player.maxHp,player.hp+40);next();}};
 shopItems.appendChild(p);

 if(Math.random()<0.9){
  let w=weapons[Math.floor(Math.random()*weapons.length)];
  let b=document.createElement("button");
  b.innerText=`${w[0]} (+${w[1]}) ${w[2]}G`;
  b.onclick=()=>{if(gold>=w[2]){gold-=w[2];player.atk+=w[1];next();}};
  shopItems.appendChild(b);
 }
 save();
}

function stat(t){
 if(t==="hp"){player.maxHp+=20;player.hp=player.maxHp;}
 if(t==="atk"){player.atk+=3;}
 player.lv++; player.need+=2;
 next();
}

function next(){show("game");spawn();save();}

function update(){
 pHp.style.width=(player.hp/player.maxHp*100)+"%";
 eHp.style.width=(enemy.hp/enemy.maxHp*100)+"%";
 goldSpan=gold;
 gold.innerText=gold;
 lv.innerText=player.lv;
}

function flash(c){
 document.body.classList.add(c==="red"?"flash-red":"flash-white");
 setTimeout(()=>document.body.className="",120);
}
function vibrate(){if(navigator.vibrate) navigator.vibrate(50);}

function save(){
 localStorage.setItem("gptrpg",JSON.stringify({player,gold,kill}));
}
function load(){
 let s=localStorage.getItem("gptrpg");
 if(s){let d=JSON.parse(s);player=d.player;gold=d.gold;kill=d.kill;}
}
function reset(){
 localStorage.removeItem("gptrpg");
 location.reload();
}
</script>
</body>
</html>